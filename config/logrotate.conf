# TradeCat 日志轮转配置
# ============================================================
# 使用方法:
#   1. 手动执行: logrotate -f /path/to/tradecat/config/logrotate.conf
#   2. 系统自动: sudo cp config/logrotate.conf /etc/logrotate.d/tradecat
#   3. 测试配置: logrotate -d config/logrotate.conf
# ============================================================

# 核心服务日志 (services/)
/home/lenovo/.projects/tradecat/services/*/logs/*.log {
    daily                   # 每天轮转
    rotate 14               # 保留 14 天
    size 50M                # 超过 50MB 也触发轮转
    compress                # 压缩旧日志
    delaycompress           # 延迟一天压缩
    missingok               # 文件不存在不报错
    notifempty              # 空文件不轮转
    copytruncate            # 复制后截断（不重启服务）
    dateext                 # 使用日期作为后缀
    dateformat -%Y%m%d      # 日期格式
    su lenovo lenovo        # 用户权限
}

# 预览服务日志 (services-preview/)
/home/lenovo/.projects/tradecat/services-preview/*/logs/*.log {
    daily
    rotate 7                # 预览服务保留 7 天
    size 50M
    compress
    delaycompress
    missingok
    notifempty
    copytruncate
    dateext
    dateformat -%Y%m%d
    su lenovo lenovo
}

# 项目根目录日志
/home/lenovo/.projects/tradecat/*.log {
    daily
    rotate 7
    size 20M
    compress
    delaycompress
    missingok
    notifempty
    copytruncate
    dateext
    dateformat -%Y%m%d
    su lenovo lenovo
}
